{"version":3,"sources":["useTagPickerGroup.js"],"sourcesContent":["import * as React from 'react';\nimport { useTagGroup_unstable } from '@fluentui/react-tags';\nimport { useTagPickerContext_unstable } from '../../contexts/TagPickerContext';\nimport { isHTMLElement, useEventCallback, useMergedRefs } from '@fluentui/react-utilities';\nimport { tagPickerAppearanceToTagAppearance, tagPickerSizeToTagSize } from '../../utils/tagPicker2Tag';\nimport { useArrowNavigationGroup } from '@fluentui/react-tabster';\nimport { ArrowRight } from '@fluentui/keyboard-keys';\n/**\n * Create the state required to render TagPickerGroup.\n *\n * The returned state can be modified with hooks such as usePickerTagGroupStyles_unstable,\n * before being passed to renderPickerTagGroup_unstable.\n *\n * @param props - props from this instance of TagPickerGroup\n * @param ref - reference to root HTMLDivElement of TagPickerGroup\n */ export const useTagPickerGroup_unstable = (props, ref)=>{\n    const hasSelectedOptions = useTagPickerContext_unstable((ctx)=>ctx.selectedOptions.length > 0);\n    const hasOneSelectedOption = useTagPickerContext_unstable((ctx)=>ctx.selectedOptions.length === 1);\n    const triggerRef = useTagPickerContext_unstable((ctx)=>ctx.triggerRef);\n    const tagPickerGroupRef = useTagPickerContext_unstable((ctx)=>ctx.tagPickerGroupRef);\n    const selectOption = useTagPickerContext_unstable((ctx)=>ctx.selectOption);\n    const size = useTagPickerContext_unstable((ctx)=>tagPickerSizeToTagSize(ctx.size));\n    const appearance = useTagPickerContext_unstable((ctx)=>ctx.appearance);\n    const arrowNavigationProps = useArrowNavigationGroup({\n        circular: false,\n        axis: 'both',\n        memorizeCurrent: true\n    });\n    const state = useTagGroup_unstable({\n        role: 'listbox',\n        ...props,\n        ...arrowNavigationProps,\n        size,\n        appearance: tagPickerAppearanceToTagAppearance(appearance),\n        dismissible: true,\n        onKeyDown: useEventCallback((event)=>{\n            var _props_onKeyDown;\n            (_props_onKeyDown = props.onKeyDown) === null || _props_onKeyDown === void 0 ? void 0 : _props_onKeyDown.call(props, event);\n            if (isHTMLElement(event.target) && event.key === ArrowRight) {\n                var _triggerRef_current;\n                (_triggerRef_current = triggerRef.current) === null || _triggerRef_current === void 0 ? void 0 : _triggerRef_current.focus();\n            }\n        }),\n        onDismiss: useEventCallback((event, data)=>{\n            selectOption(event, {\n                value: data.value,\n                // These values no longer exist because the option has unregistered itself\n                // for the purposes of selection - these values aren't actually used\n                id: 'ERROR_DO_NOT_USE',\n                text: 'ERROR_DO_NOT_USE'\n            });\n            if (hasOneSelectedOption && !event.isDefaultPrevented()) {\n                var _triggerRef_current;\n                (_triggerRef_current = triggerRef.current) === null || _triggerRef_current === void 0 ? void 0 : _triggerRef_current.focus();\n            }\n        })\n    }, useMergedRefs(ref, tagPickerGroupRef));\n    return {\n        ...state,\n        hasSelectedOptions\n    };\n};\n"],"names":["useTagPickerGroup_unstable","props","ref","hasSelectedOptions","useTagPickerContext_unstable","ctx","selectedOptions","length","hasOneSelectedOption","triggerRef","tagPickerGroupRef","selectOption","size","tagPickerSizeToTagSize","appearance","arrowNavigationProps","useArrowNavigationGroup","circular","axis","memorizeCurrent","state","useTagGroup_unstable","role","tagPickerAppearanceToTagAppearance","dismissible","onKeyDown","useEventCallback","event","_props_onKeyDown","call","isHTMLElement","target","key","ArrowRight","_triggerRef_current","current","focus","onDismiss","data","value","id","text","isDefaultPrevented","useMergedRefs"],"mappings":";;;;+BAeiBA;;;eAAAA;;;;iEAfM;2BACc;kCACQ;gCACkB;+BACY;8BACnC;8BACb;AAShB,MAAMA,6BAA6B,CAACC,OAAOC;IAClD,MAAMC,qBAAqBC,IAAAA,8CAA4B,EAAC,CAACC,MAAMA,IAAIC,eAAe,CAACC,MAAM,GAAG;IAC5F,MAAMC,uBAAuBJ,IAAAA,8CAA4B,EAAC,CAACC,MAAMA,IAAIC,eAAe,CAACC,MAAM,KAAK;IAChG,MAAME,aAAaL,IAAAA,8CAA4B,EAAC,CAACC,MAAMA,IAAII,UAAU;IACrE,MAAMC,oBAAoBN,IAAAA,8CAA4B,EAAC,CAACC,MAAMA,IAAIK,iBAAiB;IACnF,MAAMC,eAAeP,IAAAA,8CAA4B,EAAC,CAACC,MAAMA,IAAIM,YAAY;IACzE,MAAMC,OAAOR,IAAAA,8CAA4B,EAAC,CAACC,MAAMQ,IAAAA,qCAAsB,EAACR,IAAIO,IAAI;IAChF,MAAME,aAAaV,IAAAA,8CAA4B,EAAC,CAACC,MAAMA,IAAIS,UAAU;IACrE,MAAMC,uBAAuBC,IAAAA,qCAAuB,EAAC;QACjDC,UAAU;QACVC,MAAM;QACNC,iBAAiB;IACrB;IACA,MAAMC,QAAQC,IAAAA,+BAAoB,EAAC;QAC/BC,MAAM;QACN,GAAGrB,KAAK;QACR,GAAGc,oBAAoB;QACvBH;QACAE,YAAYS,IAAAA,iDAAkC,EAACT;QAC/CU,aAAa;QACbC,WAAWC,IAAAA,gCAAgB,EAAC,CAACC;YACzB,IAAIC;YACHA,CAAAA,mBAAmB3B,MAAMwB,SAAS,AAAD,MAAO,QAAQG,qBAAqB,KAAK,IAAI,KAAK,IAAIA,iBAAiBC,IAAI,CAAC5B,OAAO0B;YACrH,IAAIG,IAAAA,6BAAa,EAACH,MAAMI,MAAM,KAAKJ,MAAMK,GAAG,KAAKC,wBAAU,EAAE;gBACzD,IAAIC;gBACHA,CAAAA,sBAAsBzB,WAAW0B,OAAO,AAAD,MAAO,QAAQD,wBAAwB,KAAK,IAAI,KAAK,IAAIA,oBAAoBE,KAAK;YAC9H;QACJ;QACAC,WAAWX,IAAAA,gCAAgB,EAAC,CAACC,OAAOW;YAChC3B,aAAagB,OAAO;gBAChBY,OAAOD,KAAKC,KAAK;gBACjB,0EAA0E;gBAC1E,oEAAoE;gBACpEC,IAAI;gBACJC,MAAM;YACV;YACA,IAAIjC,wBAAwB,CAACmB,MAAMe,kBAAkB,IAAI;gBACrD,IAAIR;gBACHA,CAAAA,sBAAsBzB,WAAW0B,OAAO,AAAD,MAAO,QAAQD,wBAAwB,KAAK,IAAI,KAAK,IAAIA,oBAAoBE,KAAK;YAC9H;QACJ;IACJ,GAAGO,IAAAA,6BAAa,EAACzC,KAAKQ;IACtB,OAAO;QACH,GAAGU,KAAK;QACRjB;IACJ;AACJ"}