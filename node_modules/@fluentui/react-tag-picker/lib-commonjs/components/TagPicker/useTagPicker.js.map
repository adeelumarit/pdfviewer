{"version":3,"sources":["useTagPicker.js"],"sourcesContent":["import * as React from 'react';\nimport { useEventCallback, useId, useMergedRefs } from '@fluentui/react-utilities';\nimport { optionClassNames } from '@fluentui/react-combobox';\nimport { resolvePositioningShorthand, usePositioning } from '@fluentui/react-positioning';\nimport { useActiveDescendant } from '@fluentui/react-aria';\nimport { useComboboxBaseState } from '@fluentui/react-combobox';\n// Set a default set of fallback positions to try if the dropdown does not fit on screen\nconst fallbackPositions = [\n    'above',\n    'after',\n    'after-top',\n    'before',\n    'before-top'\n];\n/**\n * Create the state required to render Picker.\n *\n * The returned state can be modified with hooks such as usePickerStyles_unstable,\n * before being passed to renderPicker_unstable.\n *\n * @param props - props from this instance of Picker\n */ export const useTagPicker_unstable = (props)=>{\n    const popoverId = useId('picker-listbox');\n    const triggerInnerRef = React.useRef(null);\n    const secondaryActionRef = React.useRef(null);\n    const tagPickerGroupRef = React.useRef(null);\n    const { positioning, size = 'medium', inline = false } = props;\n    const { targetRef, containerRef } = usePositioning({\n        position: 'below',\n        align: 'start',\n        offset: {\n            crossAxis: 0,\n            mainAxis: 2\n        },\n        fallbackPositions,\n        matchTargetSize: 'width',\n        ...resolvePositioningShorthand(positioning)\n    });\n    const { controller: activeDescendantController, activeParentRef, listboxRef } = useActiveDescendant({\n        matchOption: (el)=>el.classList.contains(optionClassNames.root)\n    });\n    const comboboxState = useComboboxBaseState({\n        ...props,\n        onOptionSelect: useEventCallback((event, data)=>{\n            var _props_onOptionSelect;\n            return (_props_onOptionSelect = props.onOptionSelect) === null || _props_onOptionSelect === void 0 ? void 0 : _props_onOptionSelect.call(props, event, {\n                selectedOptions: data.selectedOptions,\n                value: data.optionValue,\n                type: event.type,\n                event\n            });\n        }),\n        onOpenChange: useEventCallback((event, data)=>{\n            var _props_onOpenChange;\n            return (_props_onOpenChange = props.onOpenChange) === null || _props_onOpenChange === void 0 ? void 0 : _props_onOpenChange.call(props, event, {\n                ...data,\n                type: event.type,\n                event\n            });\n        }),\n        activeDescendantController,\n        editable: true,\n        multiselect: true,\n        size: 'medium'\n    });\n    const { trigger, popover } = childrenToTriggerAndPopover(props.children);\n    return {\n        activeDescendantController,\n        components: {},\n        trigger,\n        popover: comboboxState.open || comboboxState.hasFocus ? popover : undefined,\n        popoverId,\n        disabled: comboboxState.disabled,\n        triggerRef: useMergedRefs(triggerInnerRef, activeParentRef),\n        popoverRef: useMergedRefs(listboxRef, containerRef),\n        secondaryActionRef,\n        tagPickerGroupRef,\n        targetRef,\n        size,\n        inline,\n        open: comboboxState.open,\n        mountNode: comboboxState.mountNode,\n        onOptionClick: useEventCallback((event)=>{\n            comboboxState.onOptionClick(event);\n            comboboxState.setOpen(event, false);\n        }),\n        appearance: comboboxState.appearance,\n        clearSelection: comboboxState.clearSelection,\n        getOptionById: comboboxState.getOptionById,\n        registerOption: comboboxState.registerOption,\n        selectedOptions: comboboxState.selectedOptions,\n        selectOption: comboboxState.selectOption,\n        setHasFocus: comboboxState.setHasFocus,\n        setOpen: comboboxState.setOpen,\n        setValue: comboboxState.setValue,\n        value: comboboxState.value\n    };\n};\nconst childrenToTriggerAndPopover = (children)=>{\n    const childrenArray = React.Children.toArray(children);\n    if (process.env.NODE_ENV !== 'production') {\n        if (childrenArray.length === 0) {\n            // eslint-disable-next-line no-console\n            console.warn('Picker must contain at least one child');\n        }\n        if (childrenArray.length > 2) {\n            // eslint-disable-next-line no-console\n            console.warn('Picker must contain at most two children');\n        }\n    }\n    let trigger = undefined;\n    let popover = undefined;\n    if (childrenArray.length === 2) {\n        trigger = childrenArray[0];\n        popover = childrenArray[1];\n    } else if (childrenArray.length === 1) {\n        popover = childrenArray[0];\n    }\n    return {\n        trigger,\n        popover\n    };\n};\n"],"names":["useTagPicker_unstable","fallbackPositions","props","popoverId","useId","triggerInnerRef","React","useRef","secondaryActionRef","tagPickerGroupRef","positioning","size","inline","targetRef","containerRef","usePositioning","position","align","offset","crossAxis","mainAxis","matchTargetSize","resolvePositioningShorthand","controller","activeDescendantController","activeParentRef","listboxRef","useActiveDescendant","matchOption","el","classList","contains","optionClassNames","root","comboboxState","useComboboxBaseState","onOptionSelect","useEventCallback","event","data","_props_onOptionSelect","call","selectedOptions","value","optionValue","type","onOpenChange","_props_onOpenChange","editable","multiselect","trigger","popover","childrenToTriggerAndPopover","children","components","open","hasFocus","undefined","disabled","triggerRef","useMergedRefs","popoverRef","mountNode","onOptionClick","setOpen","appearance","clearSelection","getOptionById","registerOption","selectOption","setHasFocus","setValue","childrenArray","Children","toArray","process","env","NODE_ENV","length","console","warn"],"mappings":"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"}