{"version":3,"sources":["useSearchBox.js"],"sourcesContent":["import * as React from 'react';\nimport { isResolvedShorthand, mergeCallbacks, slot, useControllableState, useEventCallback, useMergedRefs } from '@fluentui/react-utilities';\nimport { useInput_unstable } from '@fluentui/react-input';\nimport { DismissRegular, SearchRegular } from '@fluentui/react-icons';\n/**\n * Create the state required to render SearchBox.\n *\n * The returned state can be modified with hooks such as useSearchBoxStyles_unstable,\n * before being passed to renderSearchBox_unstable.\n *\n * @param props - props from this instance of SearchBox\n * @param ref - reference to root HTMLElement of SearchBox\n */ export const useSearchBox_unstable = (props, ref)=>{\n    const { size = 'medium', disabled = false, root, contentBefore, dismiss, contentAfter, value, defaultValue, ...inputProps } = props;\n    const searchBoxRootRef = React.useRef(null);\n    const searchBoxRef = React.useRef(null);\n    const [internalValue, setInternalValue] = useControllableState({\n        state: value,\n        defaultState: defaultValue,\n        initialState: ''\n    });\n    // Tracks the focus of the component for the contentAfter and dismiss button\n    const [focused, setFocused] = React.useState(false);\n    const onFocus = useEventCallback(()=>{\n        setFocused(true);\n    });\n    const onBlur = useEventCallback((ev)=>{\n        var _searchBoxRootRef_current;\n        setFocused(!!((_searchBoxRootRef_current = searchBoxRootRef.current) === null || _searchBoxRootRef_current === void 0 ? void 0 : _searchBoxRootRef_current.contains(ev.relatedTarget)));\n    });\n    const rootProps = slot.resolveShorthand(root);\n    const handleDismissClick = useEventCallback((event)=>{\n        var _props_onChange;\n        if (isResolvedShorthand(dismiss)) {\n            var _dismiss_onClick;\n            (_dismiss_onClick = dismiss.onClick) === null || _dismiss_onClick === void 0 ? void 0 : _dismiss_onClick.call(dismiss, event);\n        }\n        const newValue = '';\n        setInternalValue(newValue);\n        (_props_onChange = props.onChange) === null || _props_onChange === void 0 ? void 0 : _props_onChange.call(props, event, {\n            value: newValue\n        });\n    });\n    const inputState = useInput_unstable({\n        type: 'search',\n        disabled,\n        size,\n        value: internalValue,\n        root: slot.always({\n            ...rootProps,\n            ref: useMergedRefs(rootProps === null || rootProps === void 0 ? void 0 : rootProps.ref, searchBoxRootRef),\n            onFocus: useEventCallback(mergeCallbacks(rootProps === null || rootProps === void 0 ? void 0 : rootProps.onFocus, onFocus)),\n            onBlur: useEventCallback(mergeCallbacks(rootProps === null || rootProps === void 0 ? void 0 : rootProps.onBlur, onBlur))\n        }, {\n            elementType: 'span'\n        }),\n        contentBefore: slot.optional(contentBefore, {\n            renderByDefault: true,\n            defaultProps: {\n                children: /*#__PURE__*/ React.createElement(SearchRegular, null)\n            },\n            elementType: 'span'\n        }),\n        contentAfter: slot.optional(contentAfter, {\n            renderByDefault: true,\n            elementType: 'span'\n        }),\n        ...inputProps,\n        onChange: useEventCallback((ev)=>{\n            var _props_onChange;\n            const newValue = ev.target.value;\n            (_props_onChange = props.onChange) === null || _props_onChange === void 0 ? void 0 : _props_onChange.call(props, ev, {\n                value: newValue\n            });\n            setInternalValue(newValue);\n        })\n    }, useMergedRefs(searchBoxRef, ref));\n    const state = {\n        ...inputState,\n        components: {\n            ...inputState.components,\n            dismiss: 'span'\n        },\n        dismiss: slot.optional(dismiss, {\n            defaultProps: {\n                children: /*#__PURE__*/ React.createElement(DismissRegular, null),\n                role: 'button',\n                'aria-label': 'clear',\n                tabIndex: -1\n            },\n            renderByDefault: true,\n            elementType: 'span'\n        }),\n        disabled,\n        focused,\n        size\n    };\n    if (state.dismiss) {\n        state.dismiss.onClick = handleDismissClick;\n    }\n    return state;\n};\n"],"names":["useSearchBox_unstable","props","ref","size","disabled","root","contentBefore","dismiss","contentAfter","value","defaultValue","inputProps","searchBoxRootRef","React","useRef","searchBoxRef","internalValue","setInternalValue","useControllableState","state","defaultState","initialState","focused","setFocused","useState","onFocus","useEventCallback","onBlur","ev","_searchBoxRootRef_current","current","contains","relatedTarget","rootProps","slot","resolveShorthand","handleDismissClick","event","_props_onChange","isResolvedShorthand","_dismiss_onClick","onClick","call","newValue","onChange","inputState","useInput_unstable","type","always","useMergedRefs","mergeCallbacks","elementType","optional","renderByDefault","defaultProps","children","createElement","SearchRegular","target","components","DismissRegular","role","tabIndex"],"mappings":"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"}