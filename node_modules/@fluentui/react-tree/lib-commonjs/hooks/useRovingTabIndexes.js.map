{"version":3,"sources":["useRovingTabIndexes.js"],"sourcesContent":["import * as React from 'react';\nimport { useFocusedElementChange } from '@fluentui/react-tabster';\nimport { elementContains } from '@fluentui/react-utilities';\n/**\n * @internal\n * https://www.w3.org/WAI/ARIA/apg/practices/keyboard-interface/#kbd_roving_tabindex\n */ export function useRovingTabIndex() {\n    const currentElementRef = React.useRef(null);\n    const walkerRef = React.useRef(null);\n    React.useEffect(()=>{\n        if (currentElementRef.current === null && walkerRef.current) {\n            initialize(walkerRef.current);\n        }\n    });\n    useFocusedElementChange((element)=>{\n        if ((element === null || element === void 0 ? void 0 : element.getAttribute('role')) === 'treeitem' && walkerRef.current && elementContains(walkerRef.current.root, element)) {\n            rove(element);\n        }\n    });\n    const initialize = React.useCallback((walker)=>{\n        walkerRef.current = walker;\n        walker.currentElement = walker.root;\n        let tabbableChild = walker.firstChild((element)=>element.tabIndex === 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP);\n        walker.currentElement = walker.root;\n        tabbableChild !== null && tabbableChild !== void 0 ? tabbableChild : tabbableChild = walker.firstChild();\n        if (!tabbableChild) {\n            return;\n        }\n        tabbableChild.tabIndex = 0;\n        currentElementRef.current = tabbableChild;\n        let nextElement = null;\n        while((nextElement = walker.nextElement()) && nextElement !== tabbableChild){\n            nextElement.tabIndex = -1;\n        }\n    }, []);\n    const rove = React.useCallback((nextElement, focusOptions)=>{\n        if (!currentElementRef.current) {\n            return;\n        }\n        currentElementRef.current.tabIndex = -1;\n        nextElement.tabIndex = 0;\n        nextElement.focus(focusOptions);\n        currentElementRef.current = nextElement;\n    }, []);\n    return {\n        rove,\n        initialize\n    };\n}\n"],"names":["useRovingTabIndex","currentElementRef","React","useRef","walkerRef","useEffect","current","initialize","useFocusedElementChange","element","getAttribute","elementContains","root","rove","useCallback","walker","currentElement","tabbableChild","firstChild","tabIndex","NodeFilter","FILTER_ACCEPT","FILTER_SKIP","nextElement","focusOptions","focus"],"mappings":";;;;+BAMoBA;;;eAAAA;;;;iEANG;8BACiB;gCACR;AAIrB,SAASA;IAChB,MAAMC,oBAAoBC,OAAMC,MAAM,CAAC;IACvC,MAAMC,YAAYF,OAAMC,MAAM,CAAC;IAC/BD,OAAMG,SAAS,CAAC;QACZ,IAAIJ,kBAAkBK,OAAO,KAAK,QAAQF,UAAUE,OAAO,EAAE;YACzDC,WAAWH,UAAUE,OAAO;QAChC;IACJ;IACAE,IAAAA,qCAAuB,EAAC,CAACC;QACrB,IAAI,AAACA,CAAAA,YAAY,QAAQA,YAAY,KAAK,IAAI,KAAK,IAAIA,QAAQC,YAAY,CAAC,OAAM,MAAO,cAAcN,UAAUE,OAAO,IAAIK,IAAAA,+BAAe,EAACP,UAAUE,OAAO,CAACM,IAAI,EAAEH,UAAU;YAC1KI,KAAKJ;QACT;IACJ;IACA,MAAMF,aAAaL,OAAMY,WAAW,CAAC,CAACC;QAClCX,UAAUE,OAAO,GAAGS;QACpBA,OAAOC,cAAc,GAAGD,OAAOH,IAAI;QACnC,IAAIK,gBAAgBF,OAAOG,UAAU,CAAC,CAACT,UAAUA,QAAQU,QAAQ,KAAK,IAAIC,WAAWC,aAAa,GAAGD,WAAWE,WAAW;QAC3HP,OAAOC,cAAc,GAAGD,OAAOH,IAAI;QACnCK,kBAAkB,QAAQA,kBAAkB,KAAK,IAAIA,gBAAgBA,gBAAgBF,OAAOG,UAAU;QACtG,IAAI,CAACD,eAAe;YAChB;QACJ;QACAA,cAAcE,QAAQ,GAAG;QACzBlB,kBAAkBK,OAAO,GAAGW;QAC5B,IAAIM,cAAc;QAClB,MAAM,AAACA,CAAAA,cAAcR,OAAOQ,WAAW,EAAC,KAAMA,gBAAgBN,cAAc;YACxEM,YAAYJ,QAAQ,GAAG,CAAC;QAC5B;IACJ,GAAG,EAAE;IACL,MAAMN,OAAOX,OAAMY,WAAW,CAAC,CAACS,aAAaC;QACzC,IAAI,CAACvB,kBAAkBK,OAAO,EAAE;YAC5B;QACJ;QACAL,kBAAkBK,OAAO,CAACa,QAAQ,GAAG,CAAC;QACtCI,YAAYJ,QAAQ,GAAG;QACvBI,YAAYE,KAAK,CAACD;QAClBvB,kBAAkBK,OAAO,GAAGiB;IAChC,GAAG,EAAE;IACL,OAAO;QACHV;QACAN;IACJ;AACJ"}