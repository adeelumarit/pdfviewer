{"version":3,"sources":["maxSize.js"],"sourcesContent":["import { size } from '@floating-ui/dom';\nimport { getBoundary } from '../utils/getBoundary';\nimport { toFloatingUIPadding } from '../utils';\n/**\n * floating-ui `size` middleware uses floating element's height/width to calculate available height/width.\n * This middleware only runs once per lifecycle, resetting styles applied by maxSize from previous lifecycle.\n * Then floating element's original size is restored and `size` middleware can calculate available height/width correctly.\n */ export const resetMaxSize = (autoSize)=>({\n        name: 'resetMaxSize',\n        fn ({ middlewareData, elements }) {\n            var _middlewareData_resetMaxSize;\n            if ((_middlewareData_resetMaxSize = middlewareData.resetMaxSize) === null || _middlewareData_resetMaxSize === void 0 ? void 0 : _middlewareData_resetMaxSize.maxSizeAlreadyReset) {\n                return {};\n            }\n            const { applyMaxWidth, applyMaxHeight } = autoSize;\n            if (applyMaxWidth) {\n                elements.floating.style.removeProperty('box-sizing');\n                elements.floating.style.removeProperty('max-width');\n                elements.floating.style.removeProperty('width');\n            }\n            if (applyMaxHeight) {\n                elements.floating.style.removeProperty('box-sizing');\n                elements.floating.style.removeProperty('max-height');\n                elements.floating.style.removeProperty('height');\n            }\n            return {\n                data: {\n                    maxSizeAlreadyReset: true\n                },\n                reset: {\n                    rects: true\n                }\n            };\n        }\n    });\nexport function maxSize(autoSize, options) {\n    const { container, overflowBoundary, overflowBoundaryPadding, isRtl } = options;\n    return size({\n        ...overflowBoundaryPadding && {\n            padding: toFloatingUIPadding(overflowBoundaryPadding, isRtl)\n        },\n        ...overflowBoundary && {\n            altBoundary: true,\n            boundary: getBoundary(container, overflowBoundary)\n        },\n        apply ({ availableHeight, availableWidth, elements, rects }) {\n            const applyMaxSizeStyles = (apply, dimension, availableSize)=>{\n                if (!apply) {\n                    return;\n                }\n                elements.floating.style.setProperty('box-sizing', 'border-box');\n                elements.floating.style.setProperty(`max-${dimension}`, `${availableSize}px`);\n                if (rects.floating[dimension] > availableSize) {\n                    elements.floating.style.setProperty(dimension, `${availableSize}px`);\n                    const axis = dimension === 'width' ? 'x' : 'y';\n                    if (!elements.floating.style.getPropertyValue(`overflow-${axis}`)) {\n                        elements.floating.style.setProperty(`overflow-${axis}`, 'auto');\n                    }\n                }\n            };\n            const { applyMaxWidth, applyMaxHeight } = autoSize;\n            applyMaxSizeStyles(applyMaxWidth, 'width', availableWidth);\n            applyMaxSizeStyles(applyMaxHeight, 'height', availableHeight);\n        }\n    });\n}\n"],"names":["resetMaxSize","maxSize","autoSize","name","fn","middlewareData","elements","_middlewareData_resetMaxSize","maxSizeAlreadyReset","applyMaxWidth","applyMaxHeight","floating","style","removeProperty","data","reset","rects","options","container","overflowBoundary","overflowBoundaryPadding","isRtl","size","padding","toFloatingUIPadding","altBoundary","boundary","getBoundary","apply","availableHeight","availableWidth","applyMaxSizeStyles","dimension","availableSize","setProperty","axis","getPropertyValue"],"mappings":";;;;;;;;;;;IAOiBA,YAAY;eAAZA;;IA4BDC,OAAO;eAAPA;;;qBAnCK;6BACO;uBACQ;AAKzB,MAAMD,eAAe,CAACE,WAAY,CAAA;QACrCC,MAAM;QACNC,IAAI,EAAEC,cAAc,EAAEC,QAAQ,EAAE;YAC5B,IAAIC;YACJ,IAAI,AAACA,CAAAA,+BAA+BF,eAAeL,YAAY,AAAD,MAAO,QAAQO,iCAAiC,KAAK,IAAI,KAAK,IAAIA,6BAA6BC,mBAAmB,EAAE;gBAC9K,OAAO,CAAC;YACZ;YACA,MAAM,EAAEC,aAAa,EAAEC,cAAc,EAAE,GAAGR;YAC1C,IAAIO,eAAe;gBACfH,SAASK,QAAQ,CAACC,KAAK,CAACC,cAAc,CAAC;gBACvCP,SAASK,QAAQ,CAACC,KAAK,CAACC,cAAc,CAAC;gBACvCP,SAASK,QAAQ,CAACC,KAAK,CAACC,cAAc,CAAC;YAC3C;YACA,IAAIH,gBAAgB;gBAChBJ,SAASK,QAAQ,CAACC,KAAK,CAACC,cAAc,CAAC;gBACvCP,SAASK,QAAQ,CAACC,KAAK,CAACC,cAAc,CAAC;gBACvCP,SAASK,QAAQ,CAACC,KAAK,CAACC,cAAc,CAAC;YAC3C;YACA,OAAO;gBACHC,MAAM;oBACFN,qBAAqB;gBACzB;gBACAO,OAAO;oBACHC,OAAO;gBACX;YACJ;QACJ;IACJ,CAAA;AACG,SAASf,QAAQC,QAAQ,EAAEe,OAAO;IACrC,MAAM,EAAEC,SAAS,EAAEC,gBAAgB,EAAEC,uBAAuB,EAAEC,KAAK,EAAE,GAAGJ;IACxE,OAAOK,IAAAA,SAAI,EAAC;QACR,GAAGF,2BAA2B;YAC1BG,SAASC,IAAAA,0BAAmB,EAACJ,yBAAyBC;QAC1D,CAAC;QACD,GAAGF,oBAAoB;YACnBM,aAAa;YACbC,UAAUC,IAAAA,wBAAW,EAACT,WAAWC;QACrC,CAAC;QACDS,OAAO,EAAEC,eAAe,EAAEC,cAAc,EAAExB,QAAQ,EAAEU,KAAK,EAAE;YACvD,MAAMe,qBAAqB,CAACH,OAAOI,WAAWC;gBAC1C,IAAI,CAACL,OAAO;oBACR;gBACJ;gBACAtB,SAASK,QAAQ,CAACC,KAAK,CAACsB,WAAW,CAAC,cAAc;gBAClD5B,SAASK,QAAQ,CAACC,KAAK,CAACsB,WAAW,CAAC,CAAC,IAAI,EAAEF,UAAU,CAAC,EAAE,CAAC,EAAEC,cAAc,EAAE,CAAC;gBAC5E,IAAIjB,MAAML,QAAQ,CAACqB,UAAU,GAAGC,eAAe;oBAC3C3B,SAASK,QAAQ,CAACC,KAAK,CAACsB,WAAW,CAACF,WAAW,CAAC,EAAEC,cAAc,EAAE,CAAC;oBACnE,MAAME,OAAOH,cAAc,UAAU,MAAM;oBAC3C,IAAI,CAAC1B,SAASK,QAAQ,CAACC,KAAK,CAACwB,gBAAgB,CAAC,CAAC,SAAS,EAAED,KAAK,CAAC,GAAG;wBAC/D7B,SAASK,QAAQ,CAACC,KAAK,CAACsB,WAAW,CAAC,CAAC,SAAS,EAAEC,KAAK,CAAC,EAAE;oBAC5D;gBACJ;YACJ;YACA,MAAM,EAAE1B,aAAa,EAAEC,cAAc,EAAE,GAAGR;YAC1C6B,mBAAmBtB,eAAe,SAASqB;YAC3CC,mBAAmBrB,gBAAgB,UAAUmB;QACjD;IACJ;AACJ"}