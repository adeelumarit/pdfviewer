{"version":3,"sources":["createMotionComponent.js"],"sourcesContent":["import { useEventCallback, useIsomorphicLayoutEffect, useMergedRefs } from '@fluentui/react-utilities';\nimport * as React from 'react';\nimport { useIsReducedMotion } from '../hooks/useIsReducedMotion';\nimport { useMotionImperativeRef } from '../hooks/useMotionImperativeRef';\nimport { animateAtoms } from '../utils/animateAtoms';\nimport { getChildElement } from '../utils/getChildElement';\n/**\n * Creates a component that will animate the children using the provided motion.\n *\n * @param value - A motion definition.\n */ export function createMotionComponent(value) {\n    const Atom = (props)=>{\n        const { children, imperativeRef, onMotionFinish: onMotionFinishProp, onMotionStart: onMotionStartProp, onMotionCancel: onMotionCancelProp, ..._rest } = props;\n        const params = _rest;\n        const child = getChildElement(children);\n        const handleRef = useMotionImperativeRef(imperativeRef);\n        const elementRef = React.useRef();\n        const paramsRef = React.useRef(params);\n        const isReducedMotion = useIsReducedMotion();\n        const onMotionStart = useEventCallback(()=>{\n            onMotionStartProp === null || onMotionStartProp === void 0 ? void 0 : onMotionStartProp(null);\n        });\n        const onMotionFinish = useEventCallback(()=>{\n            onMotionFinishProp === null || onMotionFinishProp === void 0 ? void 0 : onMotionFinishProp(null);\n        });\n        const onMotionCancel = useEventCallback(()=>{\n            onMotionCancelProp === null || onMotionCancelProp === void 0 ? void 0 : onMotionCancelProp(null);\n        });\n        useIsomorphicLayoutEffect(()=>{\n            // Heads up!\n            // We store the params in a ref to avoid re-rendering the component when the params change.\n            paramsRef.current = params;\n        });\n        useIsomorphicLayoutEffect(()=>{\n            const element = elementRef.current;\n            if (element) {\n                const atoms = typeof value === 'function' ? value({\n                    element,\n                    ...paramsRef.current\n                }) : value;\n                onMotionStart();\n                const handle = animateAtoms(element, atoms, {\n                    isReducedMotion: isReducedMotion()\n                });\n                handle.setMotionEndCallbacks(onMotionFinish, onMotionCancel);\n                handleRef.current = handle;\n                return ()=>{\n                    handle.cancel();\n                };\n            }\n        }, [\n            handleRef,\n            isReducedMotion,\n            onMotionFinish,\n            onMotionStart,\n            onMotionCancel\n        ]);\n        return React.cloneElement(children, {\n            ref: useMergedRefs(elementRef, child.ref)\n        });\n    };\n    return Atom;\n}\n"],"names":["createMotionComponent","value","Atom","props","children","imperativeRef","onMotionFinish","onMotionFinishProp","onMotionStart","onMotionStartProp","onMotionCancel","onMotionCancelProp","_rest","params","child","getChildElement","handleRef","useMotionImperativeRef","elementRef","React","useRef","paramsRef","isReducedMotion","useIsReducedMotion","useEventCallback","useIsomorphicLayoutEffect","current","element","atoms","handle","animateAtoms","setMotionEndCallbacks","cancel","cloneElement","ref","useMergedRefs"],"mappings":";;;;+BAUoBA;;;eAAAA;;;;gCAVuD;iEACpD;oCACY;wCACI;8BACV;iCACG;AAKrB,SAASA,sBAAsBC,KAAK;IAC3C,MAAMC,OAAO,CAACC;QACV,MAAM,EAAEC,QAAQ,EAAEC,aAAa,EAAEC,gBAAgBC,kBAAkB,EAAEC,eAAeC,iBAAiB,EAAEC,gBAAgBC,kBAAkB,EAAE,GAAGC,OAAO,GAAGT;QACxJ,MAAMU,SAASD;QACf,MAAME,QAAQC,IAAAA,gCAAe,EAACX;QAC9B,MAAMY,YAAYC,IAAAA,8CAAsB,EAACZ;QACzC,MAAMa,aAAaC,OAAMC,MAAM;QAC/B,MAAMC,YAAYF,OAAMC,MAAM,CAACP;QAC/B,MAAMS,kBAAkBC,IAAAA,sCAAkB;QAC1C,MAAMf,gBAAgBgB,IAAAA,gCAAgB,EAAC;YACnCf,sBAAsB,QAAQA,sBAAsB,KAAK,IAAI,KAAK,IAAIA,kBAAkB;QAC5F;QACA,MAAMH,iBAAiBkB,IAAAA,gCAAgB,EAAC;YACpCjB,uBAAuB,QAAQA,uBAAuB,KAAK,IAAI,KAAK,IAAIA,mBAAmB;QAC/F;QACA,MAAMG,iBAAiBc,IAAAA,gCAAgB,EAAC;YACpCb,uBAAuB,QAAQA,uBAAuB,KAAK,IAAI,KAAK,IAAIA,mBAAmB;QAC/F;QACAc,IAAAA,yCAAyB,EAAC;YACtB,YAAY;YACZ,2FAA2F;YAC3FJ,UAAUK,OAAO,GAAGb;QACxB;QACAY,IAAAA,yCAAyB,EAAC;YACtB,MAAME,UAAUT,WAAWQ,OAAO;YAClC,IAAIC,SAAS;gBACT,MAAMC,QAAQ,OAAO3B,UAAU,aAAaA,MAAM;oBAC9C0B;oBACA,GAAGN,UAAUK,OAAO;gBACxB,KAAKzB;gBACLO;gBACA,MAAMqB,SAASC,IAAAA,0BAAY,EAACH,SAASC,OAAO;oBACxCN,iBAAiBA;gBACrB;gBACAO,OAAOE,qBAAqB,CAACzB,gBAAgBI;gBAC7CM,UAAUU,OAAO,GAAGG;gBACpB,OAAO;oBACHA,OAAOG,MAAM;gBACjB;YACJ;QACJ,GAAG;YACChB;YACAM;YACAhB;YACAE;YACAE;SACH;QACD,qBAAOS,OAAMc,YAAY,CAAC7B,UAAU;YAChC8B,KAAKC,IAAAA,6BAAa,EAACjB,YAAYJ,MAAMoB,GAAG;QAC5C;IACJ;IACA,OAAOhC;AACX"}