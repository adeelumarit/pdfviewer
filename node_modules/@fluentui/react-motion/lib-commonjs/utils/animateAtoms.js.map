{"version":3,"sources":["animateAtoms.js"],"sourcesContent":["export function animateAtoms(element, value, options) {\n    // Heads up!\n    // Jest uses jsdom as the default environment, which doesn't support the Web Animations API. The same is true for\n    // older browsers that are out of browser support matrix. In these cases, the animation will be a no-op.\n    const SUPPORTS_WEB_ANIMATIONS = typeof element.animate === 'function';\n    const atoms = Array.isArray(value) ? value : [\n        value\n    ];\n    const { isReducedMotion } = options;\n    const animations = SUPPORTS_WEB_ANIMATIONS ? atoms.map((motion)=>{\n        const { keyframes, ...params } = motion;\n        const animation = element.animate(keyframes, {\n            fill: 'forwards',\n            ...params,\n            ...isReducedMotion && {\n                duration: 1\n            }\n        });\n        animation.persist();\n        return animation;\n    }) : [];\n    return {\n        set playbackRate (rate){\n            animations.forEach((animation)=>{\n                animation.playbackRate = rate;\n            });\n        },\n        setMotionEndCallbacks (onfinish, oncancel) {\n            // Heads up!\n            // Jest uses jsdom as the default environment, which doesn't support the Web Animations API. This no-op is\n            // necessary to avoid errors in tests.\n            //\n            // See https://github.com/microsoft/fluentui/issues/31593\n            // See https://github.com/jsdom/jsdom/issues/3429\n            if (process.env.NODE_ENV === 'test') {\n                if (animations.length === 0) {\n                    onfinish();\n                    return;\n                }\n            }\n            Promise.all(animations.map((animation)=>animation.finished)).then(()=>{\n                onfinish();\n            }).catch((err)=>{\n                var _element_ownerDocument_defaultView;\n                const DOMException = (_element_ownerDocument_defaultView = element.ownerDocument.defaultView) === null || _element_ownerDocument_defaultView === void 0 ? void 0 : _element_ownerDocument_defaultView.DOMException;\n                // Ignores \"DOMException: The user aborted a request\" that appears if animations are cancelled\n                if (DOMException && err instanceof DOMException && err.name === 'AbortError') {\n                    oncancel();\n                    return;\n                }\n                throw err;\n            });\n        },\n        cancel: ()=>{\n            animations.forEach((animation)=>{\n                animation.cancel();\n            });\n        },\n        pause: ()=>{\n            animations.forEach((animation)=>{\n                animation.pause();\n            });\n        },\n        play: ()=>{\n            animations.forEach((animation)=>{\n                animation.play();\n            });\n        },\n        finish: ()=>{\n            animations.forEach((animation)=>{\n                animation.finish();\n            });\n        }\n    };\n}\n"],"names":["animateAtoms","element","value","options","SUPPORTS_WEB_ANIMATIONS","animate","atoms","Array","isArray","isReducedMotion","animations","map","motion","keyframes","params","animation","fill","duration","persist","playbackRate","rate","forEach","setMotionEndCallbacks","onfinish","oncancel","process","env","NODE_ENV","length","Promise","all","finished","then","catch","err","_element_ownerDocument_defaultView","DOMException","ownerDocument","defaultView","name","cancel","pause","play","finish"],"mappings":";;;;+BAAgBA;;;eAAAA;;;AAAT,SAASA,aAAaC,OAAO,EAAEC,KAAK,EAAEC,OAAO;IAChD,YAAY;IACZ,iHAAiH;IACjH,wGAAwG;IACxG,MAAMC,0BAA0B,OAAOH,QAAQI,OAAO,KAAK;IAC3D,MAAMC,QAAQC,MAAMC,OAAO,CAACN,SAASA,QAAQ;QACzCA;KACH;IACD,MAAM,EAAEO,eAAe,EAAE,GAAGN;IAC5B,MAAMO,aAAaN,0BAA0BE,MAAMK,GAAG,CAAC,CAACC;QACpD,MAAM,EAAEC,SAAS,EAAE,GAAGC,QAAQ,GAAGF;QACjC,MAAMG,YAAYd,QAAQI,OAAO,CAACQ,WAAW;YACzCG,MAAM;YACN,GAAGF,MAAM;YACT,GAAGL,mBAAmB;gBAClBQ,UAAU;YACd,CAAC;QACL;QACAF,UAAUG,OAAO;QACjB,OAAOH;IACX,KAAK,EAAE;IACP,OAAO;QACH,IAAII,cAAcC,KAAK;YACnBV,WAAWW,OAAO,CAAC,CAACN;gBAChBA,UAAUI,YAAY,GAAGC;YAC7B;QACJ;QACAE,uBAAuBC,QAAQ,EAAEC,QAAQ;YACrC,YAAY;YACZ,0GAA0G;YAC1G,sCAAsC;YACtC,EAAE;YACF,yDAAyD;YACzD,iDAAiD;YACjD,IAAIC,QAAQC,GAAG,CAACC,QAAQ,KAAK,QAAQ;gBACjC,IAAIjB,WAAWkB,MAAM,KAAK,GAAG;oBACzBL;oBACA;gBACJ;YACJ;YACAM,QAAQC,GAAG,CAACpB,WAAWC,GAAG,CAAC,CAACI,YAAYA,UAAUgB,QAAQ,GAAGC,IAAI,CAAC;gBAC9DT;YACJ,GAAGU,KAAK,CAAC,CAACC;gBACN,IAAIC;gBACJ,MAAMC,eAAe,AAACD,CAAAA,qCAAqClC,QAAQoC,aAAa,CAACC,WAAW,AAAD,MAAO,QAAQH,uCAAuC,KAAK,IAAI,KAAK,IAAIA,mCAAmCC,YAAY;gBAClN,8FAA8F;gBAC9F,IAAIA,gBAAgBF,eAAeE,gBAAgBF,IAAIK,IAAI,KAAK,cAAc;oBAC1Ef;oBACA;gBACJ;gBACA,MAAMU;YACV;QACJ;QACAM,QAAQ;YACJ9B,WAAWW,OAAO,CAAC,CAACN;gBAChBA,UAAUyB,MAAM;YACpB;QACJ;QACAC,OAAO;YACH/B,WAAWW,OAAO,CAAC,CAACN;gBAChBA,UAAU0B,KAAK;YACnB;QACJ;QACAC,MAAM;YACFhC,WAAWW,OAAO,CAAC,CAACN;gBAChBA,UAAU2B,IAAI;YAClB;QACJ;QACAC,QAAQ;YACJjC,WAAWW,OAAO,CAAC,CAACN;gBAChBA,UAAU4B,MAAM;YACpB;QACJ;IACJ;AACJ"}