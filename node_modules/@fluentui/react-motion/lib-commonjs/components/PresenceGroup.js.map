{"version":3,"sources":["PresenceGroup.js"],"sourcesContent":["import { _ as _define_property } from \"@swc/helpers/_/_define_property\";\nimport * as React from 'react';\nimport { getNextChildMapping } from '../utils/groups/getNextChildMapping';\nimport { getChildMapping } from '../utils/groups/getChildMapping';\nimport { PresenceGroupItemProvider } from './PresenceGroupItemProvider';\n/* eslint-disable @typescript-eslint/explicit-member-accessibility */ /* eslint-disable @typescript-eslint/naming-convention */ /* eslint-disable @typescript-eslint/member-ordering */ export class PresenceGroup extends React.Component {\n    static getDerivedStateFromProps(nextProps, { childMapping: prevChildMapping, firstRender }) {\n        const nextChildMapping = getChildMapping(nextProps.children);\n        return {\n            childMapping: firstRender ? nextChildMapping : getNextChildMapping(prevChildMapping, nextChildMapping),\n            firstRender: false\n        };\n    }\n    componentDidMount() {\n        this.mounted = true;\n    }\n    componentWillUnmount() {\n        this.mounted = false;\n    }\n    render() {\n        return /*#__PURE__*/ React.createElement(React.Fragment, null, Object.entries(this.state.childMapping).map(([childKey, childProps])=>/*#__PURE__*/ React.createElement(PresenceGroupItemProvider, {\n                ...childProps,\n                childKey: childKey,\n                key: childKey,\n                onExit: this.handleExit\n            }, childProps.element)));\n    }\n    constructor(props, context){\n        super(props, context);\n        _define_property(this, \"mounted\", false);\n        _define_property(this, \"handleExit\", (childKey)=>{\n            const currentChildMapping = getChildMapping(this.props.children);\n            if (childKey in currentChildMapping) {\n                return;\n            }\n            if (this.mounted) {\n                this.setState((state)=>{\n                    const childMapping = {\n                        ...state.childMapping\n                    };\n                    delete childMapping[childKey];\n                    return {\n                        childMapping\n                    };\n                });\n            }\n        });\n        this.state = {\n            childMapping: {},\n            firstRender: true\n        };\n    }\n}\n"],"names":["PresenceGroup","React","Component","getDerivedStateFromProps","nextProps","childMapping","prevChildMapping","firstRender","nextChildMapping","getChildMapping","children","getNextChildMapping","componentDidMount","mounted","componentWillUnmount","render","createElement","Fragment","Object","entries","state","map","childKey","childProps","PresenceGroupItemProvider","key","onExit","handleExit","element","constructor","props","context","_define_property","currentChildMapping","setState"],"mappings":";;;;+BAKqMA;;;eAAAA;;;;iCAL/J;iEACf;qCACa;iCACJ;2CACU;AACqJ,MAAMA,sBAAsBC,OAAMC,SAAS;IACtO,OAAOC,yBAAyBC,SAAS,EAAE,EAAEC,cAAcC,gBAAgB,EAAEC,WAAW,EAAE,EAAE;QACxF,MAAMC,mBAAmBC,IAAAA,gCAAe,EAACL,UAAUM,QAAQ;QAC3D,OAAO;YACHL,cAAcE,cAAcC,mBAAmBG,IAAAA,wCAAmB,EAACL,kBAAkBE;YACrFD,aAAa;QACjB;IACJ;IACAK,oBAAoB;QAChB,IAAI,CAACC,OAAO,GAAG;IACnB;IACAC,uBAAuB;QACnB,IAAI,CAACD,OAAO,GAAG;IACnB;IACAE,SAAS;QACL,OAAO,WAAW,GAAGd,OAAMe,aAAa,CAACf,OAAMgB,QAAQ,EAAE,MAAMC,OAAOC,OAAO,CAAC,IAAI,CAACC,KAAK,CAACf,YAAY,EAAEgB,GAAG,CAAC,CAAC,CAACC,UAAUC,WAAW,GAAG,WAAW,GAAGtB,OAAMe,aAAa,CAACQ,oDAAyB,EAAE;gBAC1L,GAAGD,UAAU;gBACbD,UAAUA;gBACVG,KAAKH;gBACLI,QAAQ,IAAI,CAACC,UAAU;YAC3B,GAAGJ,WAAWK,OAAO;IAC7B;IACAC,YAAYC,KAAK,EAAEC,OAAO,CAAC;QACvB,KAAK,CAACD,OAAOC;QACbC,IAAAA,kBAAgB,EAAC,IAAI,EAAE,WAAW;QAClCA,IAAAA,kBAAgB,EAAC,IAAI,EAAE,cAAc,CAACV;YAClC,MAAMW,sBAAsBxB,IAAAA,gCAAe,EAAC,IAAI,CAACqB,KAAK,CAACpB,QAAQ;YAC/D,IAAIY,YAAYW,qBAAqB;gBACjC;YACJ;YACA,IAAI,IAAI,CAACpB,OAAO,EAAE;gBACd,IAAI,CAACqB,QAAQ,CAAC,CAACd;oBACX,MAAMf,eAAe;wBACjB,GAAGe,MAAMf,YAAY;oBACzB;oBACA,OAAOA,YAAY,CAACiB,SAAS;oBAC7B,OAAO;wBACHjB;oBACJ;gBACJ;YACJ;QACJ;QACA,IAAI,CAACe,KAAK,GAAG;YACTf,cAAc,CAAC;YACfE,aAAa;QACjB;IACJ;AACJ"}